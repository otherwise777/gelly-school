<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="./favicon.ico">

    <title>Tutorial0</title>

    <!-- Bootstrap core CSS -->
    <link href="./dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="navbar-fixed-top.css" rel="stylesheet">

    <script src="./assets/js/ie-emulation-modes-warning.js"></script>

  </head>

  <body>
 <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="./flink-forward.html">Gellyschool@FF15</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials<span class="caret"></span></a>
              <ul class="dropdown-menu">
          <li><a href="./ff15-tutorial0.html">Tutorial#0: Graphs 101</a></li>
        <li><a href="./ff15-tutorial1.html">Tutorial#1: Degree Distributions</a></li>
        <li><a href="./ff15-tutorial2.html">Tutorial#2: PageRank on the ReplyGraph</a></li>
        <li><a href="./ff15-tutorial3.html">Tutorial#3: People You Might Know</a></li>
              </ul>
            </li>
            <li><a href="https://github.com/vasia/gelly-school/tree/ff-solutions">Solutions</a></li>
            <li><a href="https://ci.apache.org/projects/flink/flink-docs-release-0.9/libs/gelly_guide.html">Gelly Docs</a></li> 
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <!-- Begin page content -->
    <div class="container">
      <div class="page-header">
        <h1>Introduction</h1>
      </div>	        <p>
				<img src="./images/intro.jpg" align="right" />
			</p>
      <br>
	        <h3>Graphs? Graphs!</h3>
            <p><strong>Graphs</strong>, also known as <strong>Networks</strong>, are data structures that capture relationships between entities:
            connections, interactions, purchases, similarities, geographic proximity, etc.
      Some examples of such relationshipas could be the following:
			<ul>
         <li>Steve follows Wendy</li>
			   <li>Emily likes Tim’s photo</li>
         <li>Tom Cruise plays in the same movie as Ken Watanabe</li>
         <li>The APC protein interacts with Catenin</li>
      </ul>
      We call the entities <strong>nodes</strong> or <strong>vertices</strong> and the relationships <strong>edges</strong>.<br>
In the above examples, Steve, Wendy, Emily, Tim, Tom Cruise, Ken Watanabe, the APC protein and Catenin are nodes. "Follows", "likes, plays in the same movie as" and "interacts" describe edges between these nodes.</p>

<p>We usually draw a Graph using circles for the nodes and arrows connecting these circles to depict the edges.
We can attach optional labels on the nodes and edges to show their values:</p>
			<p><img src="./images/graph_example_1.png" />	</p><br>
      <p><strong>Weighted</strong> graphs lets us capture the <i>strength</i> of the relationship, by associating a value (also referred to as <i>weight</i>) with each edge.
        These values can refer to similarity, importance, rating, social proximity, distance or other metrics relevant to the data and the application.
        On the left graph below, the edge value corresponds to the rating that a user has assigned to a movie. On the graph on the right, the edge values tell us how many times a Twitter user has re-tweeted another user.</p>
      <p><img src="./images/graph_example_2.png" hspace="20"/> <img src="./images/graph_example_3.png" hspace="20"/></p>
      <br>
			
			<p>Graphs can be either <b>directed</b> or <b>undirected</b>. In directed graphs, edges (and the relationships that they represent) have a pre-defined direction.
        We call the node where the edge starts from the <b>source</b> and the node where it ends the <b>target</b> node.
        The relationships "follows" and "likes" that we saw before define directed edges. Undirected edges have no direction. This usually means that the relationship is present in both directions. For example, "Tom Cruise plays in the same movie as Ken Watanabe" defines an undirected edge (Ken Watanabe also plays in the same movie as Tom Cruise).</p>

<h3>What can you do with Graphs?</h3>
  <p>By analyzing graphs we can answer many interesting questions!
    <ul>
      <li>Who is the most influential user on Twitter?</li>
			<li>Which webpage should appear first for a particular web query?</li>
			<li>What is the optimal path to propagate information in a computer network?</li>
			<li>How many hops do I need to go from A to B?</li>
			<li>How similar are the nodes in my network?</li>
  	</ul>
	All of these questions and the algorithms we use to answer help us build applications that exploit the graph structure for social network analysis, web graph analysis, machine learning, recommenders and more.</p>

<h3>When and why Gelly?</h3>
  <p>Gelly is designed to deal with large, distributed graphs. Such graphs are usually generated as intermediate results of long data-analysis pipelines, built with tools like <a href="https://flink.apache.org/">Apache Flink</a> and <a href="https://hadoop.apache.org/"> Hadoop</a>. Gelly is meant to seamlessly integrate with Flink’s <a href="https://ci.apache.org/projects/flink/flink-docs-master/apis/programming_guide.html">DataSet API</a> code to let you easily build long and complex data processing pipelines like the following:</p>
  <p><img src="./images/gelly_pipeline.png" /> </p>

  <p>If this is the kind of problems you are dealing with, then you're in the right place! Even though all tutorials here use datasets that are small enough to be processed on a commodity laptop, the same methods and algorithms can be applied to large distributed graphs.</p>

  <p>If you are looking to process medium-sized graphs on a single machine, we would suggest you take a look into the following tools:
    <ul>
      <li><a href="http://snap.stanford.edu/">SNAP</a>
      <li><a href="https://gephi.github.io/">Gephi</a>
      <li><a href="https://networkx.github.io/">NetworkX</a>
    </ul>
  </p>

      <p>If you are looking to efficiently process billion-edge graphs on a single machine, then you might want to follow <a href="http://www.frankmcsherry.org/">Frank McSherry’s blog</a>.</p>

 <h3>Some Basics</h3>
      <p>
      In Gelly, vertices and edges are defined as Flink <a href="https://ci.apache.org/projects/flink/flink-docs-master/apis/programming_guide.html#data-types">Tuples</a>. Tuples are composite data types that contain a fixed number of fields.
      A Vertex is a <i>Tuple2</i>, where the first field corresponds to the Vertex ID and the second field corresponds to the Vertex value.
      An Edge is a <i>Tuple3</i>, where the first field is the ID of the source vertex, the second field is the ID of the target vertex and the third field is the edge value.</p>

<div style="background: #f8f8f8; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-style: italic">// create a vertex with ID=42 and value=0.8</span>
Vertex<span style="color: #666666">&lt;</span>Integer<span style="color: #666666">,</span> Double<span style="color: #666666">&gt;</span> v <span style="color: #666666">=</span> <span style="color: #AA22FF; font-weight: bold">new</span> Vertex<span style="color: #666666">&lt;</span>Integer<span style="color: #666666">,</span> Double<span style="color: #666666">&gt;(42,</span> <span style="color: #666666">0.8);</span>

<span style="color: #008800; font-style: italic">// create an edge from 5 to 6 with value=&quot;foo&quot;</span>
Edge<span style="color: #666666">&lt;</span>Integer<span style="color: #666666">,</span> Integer<span style="color: #666666">,</span> String<span style="color: #666666">&gt;</span> e <span style="color: #666666">=</span> <span style="color: #AA22FF; font-weight: bold">new</span> Edge<span style="color: #666666">&lt;</span>Integer<span style="color: #666666">,</span> Integer<span style="color: #666666">,</span> String<span style="color: #666666">&gt;(5,</span> <span style="color: #666666">6,</span> <span style="color: #BB4444">&quot;foo&quot;</span><span style="color: #666666">);</span>
</pre></div>

<br><p>To define vertices and edges without associated values, we use the <b>NullValue</b> type:</p>

<div style="background: #f8f8f8; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-style: italic">// create a vertex with ID=42 and no value</span>
Vertex<span style="color: #666666">&lt;</span>Integer<span style="color: #666666">,</span> NullValue<span style="color: #666666">&gt;</span> v <span style="color: #666666">=</span> <span style="color: #AA22FF; font-weight: bold">new</span> Vertex<span style="color: #666666">&lt;</span>Integer<span style="color: #666666">,</span> NullValue<span style="color: #666666">&gt;(42,</span> NullValue<span style="color: #666666">.</span><span style="color: #BB4444">getInstance</span><span style="color: #666666">());</span>

<span style="color: #008800; font-style: italic">// create an edge from 5 to 6 with no value</span>
Edge<span style="color: #666666">&lt;</span>Integer<span style="color: #666666">,</span> Integer<span style="color: #666666">,</span> NullValue<span style="color: #666666">&gt;</span> e <span style="color: #666666">=</span> <span style="color: #AA22FF; font-weight: bold">new</span> Edge<span style="color: #666666">&lt;</span>Integer<span style="color: #666666">,</span> Integer<span style="color: #666666">,</span> NullValue<span style="color: #666666">&gt;(5,</span> <span style="color: #666666">6,</span> NullValue<span style="color: #666666">.</span><span style="color: #BB4444">getInstance</span><span style="color: #666666">());</span>
</pre></div>



<br><p>Graphs can be represented in many different ways: a list of edges, an <a href="https://en.wikipedia.org/wiki/Adjacency_list">adjacency list</a>,
      an <a href="https://en.wikipedia.org/wiki/Adjacency_matrix">adjacency matrix</a>, a list of vertices and a list of edges.
      In Gelly, Graphs are represented by a set of vertices and a set of edges. Internally, these sets are Flink <a href="https://ci.apache.org/projects/flink/flink-docs-master/apis/programming_guide.html#dataset-abstraction"> DataSet</a>s. They might be distributed over several nodes in a cluster or they might never get materialized!
      You can create a Graph in Gelly by providing both the vertices and edges DataSets or just the edges, in case the vertices have no associated values.
      </p>
      <p><img src="./images/tut1_ex2.png" hspace="20"/> <img src="./images/tut1_ex1.png" hspace="20"/></p>

      Vertices and edges are usually given as plain text files or in the form of collections. Luckily, Flink comes with utilities for creating DataSets from many different data sources. You can find a complete reference in the <a href="https://ci.apache.org/projects/flink/flink-docs-master/apis/programming_guide.html#data-sources">Flink documentation</a>. You can create Graphs from DataSets of Tuples, as well as from Vertex and Edge DataSets:

<p><div style="background: #f8f8f8; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">ExecutionEnvironment env <span style="color: #666666">=</span> ExecutionEnvironment<span style="color: #666666">.</span><span style="color: #BB4444">getExecutionEnvironment</span><span style="color: #666666">();</span>

<span style="color: #008800; font-style: italic">// create a Graph from Vertex and Edge DataSets</span>
DataSet<span style="color: #666666">&lt;</span>Vertex<span style="color: #666666">&lt;</span>String<span style="color: #666666">,</span> Long<span style="color: #666666">&gt;&gt;</span> vertices <span style="color: #666666">=</span> <span style="color: #666666">...</span>
DataSet<span style="color: #666666">&lt;</span>Edge<span style="color: #666666">&lt;</span>String<span style="color: #666666">,</span> Double<span style="color: #666666">&gt;&gt;</span> edges <span style="color: #666666">=</span> <span style="color: #666666">...</span>

Graph<span style="color: #666666">&lt;</span>String<span style="color: #666666">,</span> Long<span style="color: #666666">,</span> Double<span style="color: #666666">&gt;</span> g1 <span style="color: #666666">=</span> Graph<span style="color: #666666">.</span><span style="color: #BB4444">fromDataSet</span><span style="color: #666666">(</span>vertices<span style="color: #666666">,</span> edges<span style="color: #666666">,</span> env<span style="color: #666666">);</span>

<span style="color: #008800; font-style: italic">// create a Graph from a Tuple3 DataSet</span>
DataSet<span style="color: #666666">&lt;</span>Edge<span style="color: #666666">&lt;</span>String<span style="color: #666666">,</span> Double<span style="color: #666666">&gt;&gt;</span> tupleEdges <span style="color: #666666">=</span> <span style="color: #666666">...</span>

Graph<span style="color: #666666">&lt;</span>String<span style="color: #666666">,</span> NullValue<span style="color: #666666">,</span> Double<span style="color: #666666">&gt;</span> g2 <span style="color: #666666">=</span> Graph<span style="color: #666666">.</span><span style="color: #BB4444">fromTupleDataSet</span><span style="color: #666666">(</span>tupleEdges<span style="color: #666666">,</span> env<span style="color: #666666">);</span>
</pre></div></p>

<p>As you probably noticed, Graph expects three types: the vertex ID type, the vertex value type and the edge value type. </p>

<h3>Let's get started!</h3> 
<p>Now that you have seen how to represent graphs in Gelly, it's time to analyze some real data!
For the series of these tutorials, we are going to use data from the Apache Flink development mailing list archive. If you attended the training sessions on the DataSet API, then you have worked with this data already. For the Gelly training, we are going to be analyzing the Reply Graph, i.e. the graph that captures reply connections between mails in the archives of Apache Flink’s developer mailing list. The graph is provided as a list of records with three fields: the sender e-mail address, the receiver e-mail address and the number of reply connections between these two e-mail addresses.<br>Here is a short extract of the file:</p>

<p><em>sewen@apache.org,rmetzger@apache.org,72<br>
aljoscha@apache.org,sewen@apache.org,40<br>
fhueske@apache.org,rmetzger@apache.org,22<br>
rmetzger@apache.org,fhueske@apache.org,22
</em></p>

Proceed to <a href="./ff15-tutorial1.html">Tutorial#1</a> to try out some of Gelly's methods on this Graph!
<br><br>

<p><h4><a style="margin-left: 100px" href="./flink-forward.html"><em><--Home</em></a> <a style="margin-left: 650px" href="./ff15-tutorial1.html">Next--></a></h4></p>
    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="./dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="./assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
